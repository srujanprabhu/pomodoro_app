:root{
  --bg: linear-gradient(160deg,#0f172a 0%,#1f2937 50%,#0b1020 100%);
  --panel:#0b1222aa;
  --text:#e5e7eb;
  --muted:#9ca3af;
  --primary:#ff3b30;
  --accent:#22d3ee;

  --tomato-base:#e11d48; /* work */
  --tomato-highlight:#ff9aa7;
  --tomato-shadow:#b91c1c;
  --stem:#15803d;
  --stem-dark:#065f46;
  --progress:#22d3ee;
}

/* Short break theme */
body.break-short{
  --tomato-base:#fb923c;
  --tomato-highlight:#ffd1a6;
  --tomato-shadow:#f97316;
  --progress:#fde047;
}
/* Long break theme */
body.break-long{
  --tomato-base:#7c3aed;
  --tomato-highlight:#c4b5fd;
  --tomato-shadow:#5b21b6;
  --progress:#a78bfa;
}

/* Light mode */
body.light{
  --bg: linear-gradient(160deg,#f8fafc 0%,#eef2ff 50%,#e2e8f0 100%);
  --panel:#ffffffc7;
  --text:#0f172a;
  --muted:#475569;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial; color:var(--text);
  background:var(--bg); background-attachment:fixed; line-height:1.4;
}

.topbar{
  display:flex; justify-content:space-between; align-items:center; padding:12px 16px; backdrop-filter:saturate(120%) blur(8px);
}
.brand{display:flex; align-items:center; gap:8px; font-weight:700}
.actions{display:flex; gap:8px}

.layout{display:grid; grid-template-columns:1.1fr 0.9fr; gap:20px; max-width:1200px; margin:0 auto; padding:16px}
@media (max-width:900px){.layout{grid-template-columns:1fr;}}

.timer-panel{background:var(--panel); border-radius:16px; padding:16px; box-shadow:0 10px 30px #0004}
.tomato-wrap{position:relative; display:grid; place-items:center; padding:16px}
.tomato{width:min(520px,90vw); height:auto; transition:filter .4s ease}
.time-readout{position:absolute; top:50%; left:0; right:0; transform:translateY(-50%); text-align:center}
.time-readout .mode{font-weight:600; letter-spacing:.08em; color:var(--muted)}
.time-readout .time{font-size:clamp(40px,10vw,88px); font-weight:800; text-shadow:0 4px 24px #0006}

.controls{display:flex; gap:10px; justify-content:center; padding:8px}
.meta{display:flex; justify-content:space-between; align-items:center; gap:12px; padding:0 8px}
.volume{display:flex; align-items:center; gap:8px}

button{appearance:none; border:none; padding:10px 14px; border-radius:10px; cursor:pointer; color:var(--text); background:#ffffff1a; transition:transform .08s ease, background .3s}
button:hover{background:#ffffff2a}
button:active{transform:translateY(1px)}
button.primary{background:linear-gradient(180deg,var(--primary),#e11d48); color:white; box-shadow:0 6px 20px #e11d4866}
button.secondary{background:#22d3ee33}
button.ghost{background:transparent; outline:1px solid #ffffff2a}
button:focus-visible{outline:2px solid var(--accent); outline-offset:2px}

.sidebar{display:grid; gap:16px}
.tasks,.stats{background:var(--panel); border-radius:16px; padding:16px; box-shadow:0 10px 30px #0004}
.tasks header{display:flex; justify-content:space-between; align-items:center}
.task-actions{display:flex; gap:8px}
#taskForm{display:grid; grid-template-columns:1fr 100px auto; gap:8px; margin:12px 0}
#taskForm input{padding:10px 12px; border-radius:10px; border:1px solid #ffffff2a; background:#0002; color:var(--text)}
.task-list{list-style:none; margin:0; padding:0; display:grid; gap:8px}
.task-item{display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:8px; padding:10px; background:#ffffff10; border:1px solid #ffffff1a; border-radius:12px}
.task-item.dragging{opacity:.6}
.task-title{display:flex; flex-direction:column}
.task-title input[type="text"]{background:transparent; border:none; color:var(--text); font-size:15px}
.task-title input[type="text"]:focus{outline:none; box-shadow:inset 0 -2px 0 var(--accent)}
.pill{font-size:12px; color:var(--muted)}
.task-foot{display:flex; justify-content:flex-end; padding-top:8px}

.stats-grid{display:grid; grid-template-columns:repeat(3,1fr); gap:12px}
.stat{background:#ffffff10; border:1px solid #ffffff1a; border-radius:12px; padding:12px; text-align:center}
.stat-val{font-weight:800; font-size:22px}
.stat-label{color:var(--muted); font-size:12px}

dialog{border:none; border-radius:16px; padding:0; background:var(--panel); color:var(--text); box-shadow:0 20px 60px #0008}
.dialog-title{padding:16px; border-bottom:1px solid #ffffff1a}
.dialog-body{padding:16px; display:grid; gap:12px}
.grid2{display:grid; grid-template-columns:repeat(2,1fr); gap:8px}
.dialog-actions{display:flex; justify-content:flex-end; gap:8px; padding:12px 16px; border-top:1px solid #ffffff1a}

.onboarding{position:fixed; left:50%; bottom:24px; transform:translateX(-50%); background:var(--panel); border:1px solid #ffffff2a; border-radius:14px; padding:12px 16px; box-shadow:0 20px 60px #0007}

/* Accessibility helpers */
.visually-hidden{position:absolute!important; height:1px; width:1px; overflow:hidden; clip:rect(1px,1px,1px,1px); white-space:nowrap}

/* Progress ring animation driven by JS via stroke-dasharray */
#progressRing{transition:stroke .5s ease}


